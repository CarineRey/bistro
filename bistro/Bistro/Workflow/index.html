<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Workflow (bistro.Bistro.Workflow)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../index.html">bistro</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Bistro.Workflow</span></h1></header><div class="doc"><p>The type representing a set of actions (shell scripts or
evaluations of OCaml expressions) to build a target of type
<code class="code">'a</code>. The type <code class="code">'a</code> is a phantom type, which can be used to
enforce static invariants.</p></div><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>+'a t</code><code></code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-u"><a href="#val-u" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>u : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../U/index.html#type-t">U.t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-id"><a href="#val-id" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>id : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"></div></div><div class="spec val" id="val-compare"><a href="#val-compare" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>compare : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"></div></div><div class="spec val" id="val-equal"><a href="#val-equal" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>equal : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div><div class="spec val" id="val-to_dep"><a href="#val-to_dep" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>to_dep : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../index.html#type-dep">dep</a></code></div><div class="doc"></div></div><div class="spec val" id="val-of_fun"><a href="#val-of_fun" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>of_fun : ?&#8288;descr:string <span class="keyword">&#8209;&gt;</span> ?&#8288;mem:int <span class="keyword">&#8209;&gt;</span> ?&#8288;np:int <span class="keyword">&#8209;&gt;</span> ?&#8288;version:int <span class="keyword">&#8209;&gt;</span> id:<a href="../index.html#type-id">id</a> <span class="keyword">&#8209;&gt;</span> deps:<a href="../U/index.html#type-t">U.t</a> list <span class="keyword">&#8209;&gt;</span> (<a href="../index.html#type-env">env</a> <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">of_fun ~id ~f ~deps ()</code> builds a workflow step by executing <code class="code">f</code>. <code class="code">f</code>
is passed an <code class="code">env</code> object that can be asked where to find
dependencies in the cache and where to put the result. <code class="code">id</code> is a
string uniquely identifying <code class="code">f</code> and <code class="code">deps</code> is the list of
workflows that will be used during the evaluation of <code class="code">f</code>.</p><p>Other arguments are:
</p><ul><li></li></ul><ul class="at-tag"><li><p><span class="at-tag parameter">Parameter</span> <span class="module-path">descr</span>: description of the workflow, used for logging
</p><ul><li></li></ul></li><li><p><span class="at-tag parameter">Parameter</span> <span class="module-path">mem</span>: required memory
</p><ul><li></li></ul></li><li><p><span class="at-tag parameter">Parameter</span> <span class="module-path">np</span>: maximum number of cores (could be given less at execution)
</p><ul><li></li></ul></li><li><p><span class="at-tag parameter">Parameter</span> <span class="module-path">version</span>: version number, used to force the rebuild of a workflow</p><p>This function is not meant to be used directly because for a
given <code class="code">f</code> specifying <code class="code">id</code> and <code class="code">deps</code> manually is
error-prone. Use the PPX extension instead.</p></li></ul></div></div></body></html>