OASISFormat:  0.4
Name:         bistro
Version:      0.0.0
Synopsis:     A library to build scientific workflows
Authors:      Philippe Veber
License:      GPL-3.0
Plugins:      META (0.4), DevFiles (0.4)
BuildTools:   ocamlbuild
Homepage:     https://github.com/pveber/bistro
OCamlVersion: >= 4.02
FilesAB:      etc/META.ab
AlphaFeatures: no_automatic_syntax

PreInstallCommand:   $ocamlfind install ppx_bistro etc/META
PreUninstallCommand: $ocamlfind remove ppx_bistro

Library bistro
  Path:             lib
  Modules:          Bistro
  FindlibName:      bistro
  BuildDepends:     core_kernel
  XMETARequires:    core_kernel
  XMETADescription: Core bistro library

Library bistro_bioinfo
  Path:             lib/bioinfo
  Pack:             true
  Modules:          Bed,
                    Bowtie,
                    Bowtie2,
                    Bedtools,
                    Deseq2,
                    Ensembl,
                    FastQC,
                    Fastq,
                    Htseq,
                    Jaspar,
                    Macs,
                    Macs2,
                    Meme_suite,
                    Misc,
                    Samtools,
                    Sra,
                    Sra_toolkit,
                    Std,
                    Tophat,
                    Types,
                    Ucsc_gb
  FindlibName:      bioinfo
  FindlibParent:    bistro
  BuildDepends:     bistro
  XMETARequires:    bistro
  XMETADescription: Workflow library for computational biology

Library bistro_engine
  Path:             lib/engine
  Pack:             true
  Modules:          Db, Scheduler
  FindlibName:      engine
  FindlibParent:    bistro
  BuildDepends:     bistro, bistro.pbs, core, dbm,
                    lwt.preemptive, lwt.unix,
                    pvem, threads
  XMETARequires:    bistro, bistro.pbs, core, dbm, lwt.preemptive, lwt.unix,
                    pvem, threads
  XMETADescription: Execution engine for bistro workflows

Library bistro_utils
  Path:             lib/utils
  Modules:          Bistro_app
  FindlibName:      utils
  FindlibParent:    bistro
  BuildDepends:     bistro.engine
  XMETARequires:    bistro.engine
  XMETADescription: Utility functions for bistro

Library bistro_pbs
  Path:             lib/pbs
  Modules:          Bistro_pbs
  FindlibName:      pbs
  FindlibParent:    bistro
  BuildDepends:     lwt.unix, pbs
  XMETARequires:    lwt.unix, pbs
  XMETADescription: FIXME

Executable "ppx_bistro"
  Path:             ppx
  MainIs:           ppx_bistro.ml
  BuildDepends:     compiler-libs.common, ppx_tools.metaquot, str
  CompiledObject:   best

Test test_ppx_bistro
  Command: ocamlbuild -use-ocamlfind -I lib \
                      -cflags '-ppx $ppx_bistro' \
                      -cflags 'bistro.cma' \
                      test/test_ppx_bistro.byte
  TestTools:      ppx_bistro


# +-------------------------------------------------------------------+
# | Examples                                                          |
# +-------------------------------------------------------------------+

Executable diamond
  Path:             examples
  MainIs:           diamond.ml
  BuildDepends:     bistro.engine
  CompiledObject:   byte

Executable sacCer2_pho4
  Path:             examples
  MainIs:           sacCer2_pho4.ml
  BuildDepends:     bistro.utils, bistro.bioinfo
  CompiledObject:   byte
  
Document API
  Title:                API reference for Bistro
  Type:                 OCamlbuild (0.4)
  InstallDir:           $docdir/api
  BuildTools:	        ocamldoc, ocamlbuild
  XOCamlbuildPath:      .
  XOCamlbuildLibraries: bistro


SourceRepository head
  Type: git
  Location: git://github.com/pveber/bistro.git
  Browser: https://github.com/pveber/bistro
