OASISFormat: 0.3
Name:        bistro
Version:     0.1
Synopsis:    A tiny library to build and execute (typed) workflows of shell
  calls
Authors:     Philippe Veber
License:     GPL-3.0
Plugins:     META (0.3), DevFiles (0.3)
BuildTools: ocamlbuild

Library bistro
  Path:          src/lib
  Modules:       Bistro_db, Bistro_export,
                 Bistro_log, Bistro_repo,
                 Bistro_engine,
                 Bistro_workflow
  BuildDepends:  core, shell, threads
  FindlibName:   bistro
  XMETARequires: core, shell, threads

Library bistro_lwt
  Path:          src/lib
  Modules:       Bistro_db_lwt, Bistro_engine_lwt, Bistro_pbs, Bistro_pool
  BuildDepends:  bistro, lwt, lwt.react, lwt.syntax, lwt.unix, pbs
  FindlibName:   lwt
  FindlibParent: bistro
  XMETARequires: bistro, lwt, lwt.react, lwt.unix

Library bistro_syntax
  FindlibName:      syntax
  FindlibParent:    bistro
  Path:             src/syntax
  Modules:          Pa_bistro_script, Bistro_script_ast, Bistro_script_lexer, Bistro_script_parser
  BuildDepends:     camlp4.lib, camlp4.quotations.r
  Buildtools:       menhir
  XMETAType:        syntax
  XMETADescription: Syntactic sugar for sh scripts
  XMETARequires:    camlp4, camlp4.quotations.r

Executable test
  Path: src/tests
  MainIs: test.ml
  Install: false
  CompiledObject: byte
  Build$: flag(tests)
  BuildDepends: bistro, bistro.syntax, findlib, oUnit (>= 1.1.0)

Test main
  Type: custom (0.3)
  Command: $test
  WorkingDirectory: src/tests
  TestTools: test

Flag examples
  Description:      Build examples?
  Default:          false

Executable base_test
  Path:          src/examples
  Build$:        flag(examples)
  MainIs:        base_test.ml
  BuildDepends:  bistro

Executable dft
  Path:          src/examples
  Build$:        flag(examples)
  MainIs:        dft.ml
  BuildDepends:  bistro

Executable dft_lwt
  Path:          src/examples
  Build$:        flag(examples)
  MainIs:        dft_lwt.ml
  BuildDepends:  bistro.lwt,core,lwt.react,lwt.unix,threads

Executable dft_lwt_interactive
  Path:          src/examples
  Build$:        flag(examples)
  MainIs:        dft_lwt_interactive.ml
  BuildDepends:  bistro.lwt,core,lwt.react,lwt.unix,threads

Executable nlp_test
  Path:          src/examples
  Build$:        flag(examples)
  MainIs:        nlp_test.ml
  BuildDepends:  bistro.lwt, bistro.syntax

Executable failure
  Path:          src/examples
  Build$:        flag(examples)
  MainIs:        failure.ml
  BuildDepends:  bistro.lwt, bistro.syntax
