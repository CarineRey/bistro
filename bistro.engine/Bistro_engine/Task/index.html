<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Task (bistro.engine.Bistro_engine.Task)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../index.html">bistro.engine</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Bistro_engine.Task</span></h1></header><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code><span class="keyword"> = </span><a href="../../../bistro/Bistro/index.html#type-u">Bistro.u</a></code><code></code></div><div class="doc"></div></div><div class="spec type" id="type-result"><a href="#type-result" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>result</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-result.Input_check" class="anchored"><td class="def constructor"><a href="#type-result.Input_check" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Input_check</span><span class="keyword"> of </span></code><code>{</code><table class="record"><tr id="type-result.path" class="anchored"><td class="def field"><a href="#type-result.path" class="anchor"></a><code>path : string;</code></td></tr><tr id="type-result.pass" class="anchored"><td class="def field"><a href="#type-result.pass" class="anchor"></a><code>pass : bool;</code></td></tr></table><code>}</code><code></code></td></tr><tr id="type-result.Select_check" class="anchored"><td class="def constructor"><a href="#type-result.Select_check" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Select_check</span><span class="keyword"> of </span></code><code>{</code><table class="record"><tr id="type-result.dir_path" class="anchored"><td class="def field"><a href="#type-result.dir_path" class="anchor"></a><code>dir_path : string;</code></td></tr><tr id="type-result.sel" class="anchored"><td class="def field"><a href="#type-result.sel" class="anchor"></a><code>sel : string list;</code></td></tr><tr id="type-result.pass" class="anchored"><td class="def field"><a href="#type-result.pass" class="anchor"></a><code>pass : bool;</code></td></tr></table><code>}</code><code></code></td></tr><tr id="type-result.Step_result" class="anchored"><td class="def constructor"><a href="#type-result.Step_result" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Step_result</span><span class="keyword"> of </span></code><code>{</code><table class="record"><tr id="type-result.outcome" class="anchored"><td class="def field"><a href="#type-result.outcome" class="anchor"></a><code>outcome : [ `Succeeded | `Missing_output | `Failed ];</code></td></tr><tr id="type-result.step" class="anchored"><td class="def field"><a href="#type-result.step" class="anchor"></a><code>step : <a href="../../../bistro/Bistro/index.html#type-step">Bistro.step</a>;</code></td></tr><tr id="type-result.exit_code" class="anchored"><td class="def field"><a href="#type-result.exit_code" class="anchor"></a><code>exit_code : int;</code></td></tr><tr id="type-result.action" class="anchored"><td class="def field"><a href="#type-result.action" class="anchor"></a><code>action : [ `Sh of string | `Eval ];</code></td></tr><tr id="type-result.dumps" class="anchored"><td class="def field"><a href="#type-result.dumps" class="anchor"></a><code>dumps : (string<span class="keyword"> * </span>string) list;</code></td></tr><tr id="type-result.cache" class="anchored"><td class="def field"><a href="#type-result.cache" class="anchor"></a><code>cache : string option;</code></td></tr><tr id="type-result.stdout" class="anchored"><td class="def field"><a href="#type-result.stdout" class="anchor"></a><code>stdout : string;</code></td></tr><tr id="type-result.stderr" class="anchored"><td class="def field"><a href="#type-result.stderr" class="anchor"></a><code>stderr : string;</code></td></tr></table><code>}</code><code></code></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec type" id="type-config"><a href="#type-config" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>config</code><code></code><code><span class="keyword"> = </span><span class="keyword">private </span></code><code>{</code><table class="record"><tr id="type-config.db" class="anchored"><td class="def field"><a href="#type-config.db" class="anchor"></a><code>db : <a href="../Db/index.html#type-t">Db.t</a>;</code></td></tr><tr id="type-config.use_docker" class="anchored"><td class="def field"><a href="#type-config.use_docker" class="anchor"></a><code>use_docker : bool;</code></td></tr><tr id="type-config.keep_all" class="anchored"><td class="def field"><a href="#type-config.keep_all" class="anchor"></a><code>keep_all : bool;</code></td></tr><tr id="type-config.precious" class="anchored"><td class="def field"><a href="#type-config.precious" class="anchor"></a><code>precious : Core.String.Set.t;</code></td></tr></table><code>}</code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-config"><a href="#val-config" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>config : db_path:string <span class="keyword">&#8209;&gt;</span> use_docker:bool <span class="keyword">&#8209;&gt;</span> keep_all:bool <span class="keyword">&#8209;&gt;</span> precious:Core.String.Set.t <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-config">config</a></code></div><div class="doc"></div></div><div class="spec val" id="val-id"><a href="#val-id" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>id : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"></div></div><div class="spec val" id="val-equal"><a href="#val-equal" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>equal : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div><div class="spec val" id="val-compare"><a href="#val-compare" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>compare : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"></div></div><div class="spec val" id="val-requirement"><a href="#val-requirement" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>requirement : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Allocator/index.html#type-request">Allocator.request</a></code></div><div class="doc"></div></div><div class="spec val" id="val-perform"><a href="#val-perform" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>perform : <a href="../Allocator/index.html#type-resource">Allocator.resource</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-config">config</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-result">result</a> Lwt.t</code></div><div class="doc"></div></div><div class="spec val" id="val-failure"><a href="#val-failure" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>failure : <a href="index.html#type-result">result</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"></div></div><div class="spec val" id="val-is_done"><a href="#val-is_done" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_done : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-config">config</a> <span class="keyword">&#8209;&gt;</span> bool Lwt.t</code></div><div class="doc"></div></div><div class="spec val" id="val-post_revdeps_hook"><a href="#val-post_revdeps_hook" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>post_revdeps_hook : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-config">config</a> <span class="keyword">&#8209;&gt;</span> all_revdeps_succeeded:bool <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"></div></div><div class="spec val" id="val-clean"><a href="#val-clean" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>clean : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-config">config</a> <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"></div></div><div class="spec val" id="val-render_step_command"><a href="#val-render_step_command" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>render_step_command : np:int <span class="keyword">&#8209;&gt;</span> mem:int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-config">config</a> <span class="keyword">&#8209;&gt;</span> <a href="../../../bistro/Bistro/index.html#type-step">Bistro.step</a> <span class="keyword">&#8209;&gt;</span> <a href="../../../bistro/Bistro/index.html#type-dep">Bistro.dep</a> <a href="../../../bistro/Bistro/Command/index.html#type-t">Bistro.Command.t</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"></div></div><div class="spec val" id="val-render_step_dumps"><a href="#val-render_step_dumps" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>render_step_dumps : np:int <span class="keyword">&#8209;&gt;</span> mem:int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-config">config</a> <span class="keyword">&#8209;&gt;</span> <a href="../../../bistro/Bistro/index.html#type-step">Bistro.step</a> <span class="keyword">&#8209;&gt;</span> (string<span class="keyword"> * </span>string) list</code></div><div class="doc"></div></div></body></html>